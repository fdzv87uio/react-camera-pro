{"version":3,"sources":["Camera/index.js","App.tsx","serviceWorker.js","index.tsx"],"names":["__makeTemplateObject","cooked","raw","Object","defineProperty","value","templateObject_1","templateObject_2","templateObject_3","templateObject_4","templateObject_5","Wrapper","styled","div","Container","_a","aspectRatio","ErrorMsg","Cam","video","mirrored","Canvas","canvas","Camera","React","forwardRef","ref","_b","facingMode","_c","_d","numberOfCamerasCallback","_e","errorMessages","noCameraAccessible","permissionDenied","switchCamera","player","useRef","container","_f","useState","numberOfCameras","setNumberOfCameras","_g","stream","setStream","_h","currentFacingMode","setFacingMode","_j","notSupported","setNotSupported","_k","setPermissionDenied","useEffect","useImperativeHandle","takePhoto","Error","current","playerWidth","videoWidth","playerHeight","videoHeight","playerAR","canvasAR","offsetWidth","offsetHeight","sX","sY","sW","sH","width","height","context","getContext","drawImage","toDataURL","console","error","newFacingMode","getNumberOfCameras","initCameraStream","srcObject","getTracks","forEach","track","stop","createElement","id","muted","autoPlay","playsInline","displayName","constraints","audio","ideal","navigator","mediaDevices","getUserMedia","then","handleSuccess","catch","err","handleError","getWebcam","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","enumerateDevices","r","filter","i","kind","length","name","Control","Button","button","TakePhotoButton","ChangeFacingCameraButton","ImagePreview","image","FullScreenImagePreview","App","setImage","showImage","setShowImage","camera","onClick","photo","log","disabled","result","Boolean","window","location","hostname","match","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c430fa15.chunk.js","sourcesContent":["/* eslint-disable */\nimport React, { useRef, useState, useEffect, useImperativeHandle } from 'react';\nimport styled from 'styled-components';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n}\n\nvar Wrapper = styled.div(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n\"], [\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n\"])));\r\nvar Container = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  width: 100%;\\n  \", \"\\n\"], [\"\\n  width: 100%;\\n  \",\r\n    \"\\n\"])), function (_a) {\r\n    var aspectRatio = _a.aspectRatio;\r\n    return aspectRatio === 'cover'\r\n        ? \"\\n    position: absolute;\\n    bottom: 0\\n    top: 0\\n    left: 0\\n    right: 0\"\r\n        : \"\\n    position: relative;\\n    padding-bottom: \" + 100 / aspectRatio + \"%;\";\r\n});\r\nvar ErrorMsg = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  padding: 40px;\\n\"], [\"\\n  padding: 40px;\\n\"])));\r\nvar Cam = styled.video(templateObject_4 || (templateObject_4 = __makeTemplateObject([\"\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n  z-index: 0;\\n  transform: rotateY(\", \");\\n\"], [\"\\n  width: 100%;\\n  height: 100%;\\n  object-fit: cover;\\n  z-index: 0;\\n  transform: rotateY(\", \");\\n\"])), function (_a) {\r\n    var mirrored = _a.mirrored;\r\n    return (mirrored ? '180deg' : '0deg');\r\n});\r\nvar Canvas = styled.canvas(templateObject_5 || (templateObject_5 = __makeTemplateObject([\"\\n  display: none;\\n\"], [\"\\n  display: none;\\n\"])));\r\nvar templateObject_1, templateObject_2, templateObject_3, templateObject_4, templateObject_5;\n\nvar Camera = React.forwardRef(function (_a, ref) {\r\n    var _b = _a.facingMode, facingMode = _b === void 0 ? 'user' : _b, _c = _a.aspectRatio, aspectRatio = _c === void 0 ? 'cover' : _c, _d = _a.numberOfCamerasCallback, numberOfCamerasCallback = _d === void 0 ? function () { return null; } : _d, _e = _a.errorMessages, errorMessages = _e === void 0 ? {\r\n        noCameraAccessible: 'No camera device accessible. Please connect your camera or try a different browser.',\r\n        permissionDenied: 'Permission denied. Please refresh and give camera permission.',\r\n        switchCamera: 'It is not possible to switch camera to different one because there is only one video device accessible.',\r\n        canvas: 'Canvas is not supported.',\r\n    } : _e;\r\n    var player = useRef(null);\r\n    var canvas = useRef(null);\r\n    var container = useRef(null);\r\n    var _f = useState(0), numberOfCameras = _f[0], setNumberOfCameras = _f[1];\r\n    var _g = useState(null), stream = _g[0], setStream = _g[1];\r\n    var _h = useState(facingMode), currentFacingMode = _h[0], setFacingMode = _h[1];\r\n    var _j = useState(false), notSupported = _j[0], setNotSupported = _j[1];\r\n    var _k = useState(false), permissionDenied = _k[0], setPermissionDenied = _k[1];\r\n    useEffect(function () {\r\n        numberOfCamerasCallback(numberOfCameras);\r\n    }, [numberOfCameras]);\r\n    useImperativeHandle(ref, function () { return ({\r\n        takePhoto: function () {\r\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\r\n            if (numberOfCameras < 1) {\r\n                throw new Error(errorMessages.noCameraAccessible);\r\n            }\r\n            if ((_a = canvas) === null || _a === void 0 ? void 0 : _a.current) {\r\n                var playerWidth = ((_c = (_b = player) === null || _b === void 0 ? void 0 : _b.current) === null || _c === void 0 ? void 0 : _c.videoWidth) || 1280;\r\n                var playerHeight = ((_e = (_d = player) === null || _d === void 0 ? void 0 : _d.current) === null || _e === void 0 ? void 0 : _e.videoHeight) || 720;\r\n                var playerAR = playerWidth / playerHeight;\r\n                var canvasWidth = ((_g = (_f = container) === null || _f === void 0 ? void 0 : _f.current) === null || _g === void 0 ? void 0 : _g.offsetWidth) || 1280;\r\n                var canvasHeight = ((_j = (_h = container) === null || _h === void 0 ? void 0 : _h.current) === null || _j === void 0 ? void 0 : _j.offsetHeight) || 1280;\r\n                var canvasAR = canvasWidth / canvasHeight;\r\n                var sX = void 0, sY = void 0, sW = void 0, sH = void 0;\r\n                if (playerAR > canvasAR) {\r\n                    sH = playerHeight;\r\n                    sW = playerHeight * canvasAR;\r\n                    sX = (playerWidth - sW) / 2;\r\n                    sY = 0;\r\n                }\r\n                else {\r\n                    sW = playerWidth;\r\n                    sH = playerWidth / canvasAR;\r\n                    sX = 0;\r\n                    sY = (playerHeight - sH) / 2;\r\n                }\r\n                canvas.current.width = sW;\r\n                canvas.current.height = sH;\r\n                var context = canvas.current.getContext('2d');\r\n                if (context && ((_k = player) === null || _k === void 0 ? void 0 : _k.current)) {\r\n                    context.drawImage(player.current, sX, sY, sW, sH, 0, 0, sW, sH);\r\n                }\r\n                var imgData = canvas.current.toDataURL('image/jpeg');\r\n                return imgData;\r\n            }\r\n            else {\r\n                throw new Error(errorMessages.canvas);\r\n            }\r\n        },\r\n        switchCamera: function () {\r\n            if (numberOfCameras < 1) {\r\n                throw new Error(errorMessages.noCameraAccessible);\r\n            }\r\n            else if (numberOfCameras < 2) {\r\n                console.error('Error: Unable to switch camera. Only one device is accessible.'); // console only\r\n            }\r\n            var newFacingMode = currentFacingMode === 'user' ? 'environment' : 'user';\r\n            setFacingMode(newFacingMode);\r\n            return newFacingMode;\r\n        },\r\n        getNumberOfCameras: function () {\r\n            return numberOfCameras;\r\n        },\r\n    }); });\r\n    useEffect(function () {\r\n        initCameraStream(stream, setStream, currentFacingMode, setNumberOfCameras, setNotSupported, setPermissionDenied);\r\n    }, [currentFacingMode]);\r\n    useEffect(function () {\r\n        if (stream && player && player.current) {\r\n            player.current.srcObject = stream;\r\n        }\r\n        return function () {\r\n            if (stream) {\r\n                stream.getTracks().forEach(function (track) {\r\n                    track.stop();\r\n                });\r\n            }\r\n        };\r\n    }, [stream]);\r\n    return (React.createElement(Container, { ref: container, aspectRatio: aspectRatio },\r\n        React.createElement(Wrapper, null,\r\n            notSupported ? React.createElement(ErrorMsg, null, errorMessages.noCameraAccessible) : null,\r\n            permissionDenied ? React.createElement(ErrorMsg, null, errorMessages.permissionDenied) : null,\r\n            React.createElement(Cam, { ref: player, id: \"video\", muted: true, autoPlay: true, playsInline: true, mirrored: currentFacingMode === 'user' ? true : false }),\r\n            React.createElement(Canvas, { ref: canvas }))));\r\n});\r\nCamera.displayName = 'Camera';\r\nvar initCameraStream = function (stream, setStream, currentFacingMode, setNumberOfCameras, setNotSupported, setPermissionDenied) {\r\n    var _a, _b;\r\n    // stop any active streams in the window\r\n    if (stream) {\r\n        stream.getTracks().forEach(function (track) {\r\n            track.stop();\r\n        });\r\n    }\r\n    var constraints = {\r\n        audio: false,\r\n        video: {\r\n            facingMode: currentFacingMode,\r\n            width: { ideal: 1920 },\r\n            height: { ideal: 1920 },\r\n        },\r\n    };\r\n    if ((_b = (_a = navigator) === null || _a === void 0 ? void 0 : _a.mediaDevices) === null || _b === void 0 ? void 0 : _b.getUserMedia) {\r\n        navigator.mediaDevices\r\n            .getUserMedia(constraints)\r\n            .then(function (stream) {\r\n            setStream(handleSuccess(stream, setNumberOfCameras));\r\n        })\r\n            .catch(function (err) {\r\n            handleError(err, setNotSupported, setPermissionDenied);\r\n        });\r\n    }\r\n    else {\r\n        var getWebcam = navigator.getUserMedia ||\r\n            navigator.webkitGetUserMedia ||\r\n            navigator.mozGetUserMedia ||\r\n            navigator.mozGetUserMedia ||\r\n            navigator.msGetUserMedia;\r\n        if (getWebcam) {\r\n            getWebcam(constraints, function (stream) {\r\n                setStream(handleSuccess(stream, setNumberOfCameras));\r\n            }, function (err) {\r\n                handleError(err, setNotSupported, setPermissionDenied);\r\n            });\r\n        }\r\n        else {\r\n            setNotSupported(true);\r\n        }\r\n    }\r\n};\r\nvar handleSuccess = function (stream, setNumberOfCameras) {\r\n    navigator.mediaDevices\r\n        .enumerateDevices()\r\n        .then(function (r) { return setNumberOfCameras(r.filter(function (i) { return i.kind === 'videoinput'; }).length); });\r\n    return stream;\r\n};\r\nvar handleError = function (error, setNotSupported, setPermissionDenied) {\r\n    console.error(error);\r\n    //https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\r\n    if (error.name === 'PermissionDeniedError') {\r\n        setPermissionDenied(true);\r\n    }\r\n    else {\r\n        setNotSupported(true);\r\n    }\r\n};\n\nexport { Camera };\n","import React, { useRef, useState } from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport { Camera, CameraType } from './Camera';\r\n\r\nconst Wrapper = styled.div`\r\n  position: fixed;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 1;\r\n`;\r\n\r\nconst Control = styled.div`\r\n  position: fixed;\r\n  display: flex;\r\n  right: 0;\r\n  width: 20%;\r\n  min-width: 130px;\r\n  min-height: 130px;\r\n  height: 100%;\r\n  background: rgba(0, 0, 0, 0.8);\r\n  z-index: 10;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 50px;\r\n  box-sizing: border-box;\r\n  flex-direction: column-reverse;\r\n\r\n  @media (max-aspect-ratio: 1/1) {\r\n    flex-direction: row;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 20%;\r\n  }\r\n\r\n  @media (max-width: 400px) {\r\n    padding: 10px;\r\n  }\r\n`;\r\n\r\nconst Button = styled.button`\r\n  outline: none;\r\n  color: white;\r\n  opacity: 1;\r\n  background: transparent;\r\n  background-color: transparent;\r\n  background-position-x: 0%;\r\n  background-position-y: 0%;\r\n  background-repeat: repeat;\r\n  background-image: none;\r\n  padding: 0;\r\n  text-shadow: 0px 0px 4px black;\r\n  background-position: center center;\r\n  background-repeat: no-repeat;\r\n  pointer-events: auto;\r\n  cursor: pointer;\r\n  z-index: 2;\r\n  filter: invert(100%);\r\n  border: none;\r\n\r\n  &:hover {\r\n    opacity: 0.7;\r\n  }\r\n`;\r\n\r\nconst TakePhotoButton = styled(Button)`\r\n  background: url('https://img.icons8.com/ios/50/000000/compact-camera.png');\r\n  background-position: center;\r\n  background-size: 50px;\r\n  background-repeat: no-repeat;\r\n  width: 80px;\r\n  height: 80px;\r\n  border: solid 4px black;\r\n  border-radius: 50%;\r\n\r\n  &:hover {\r\n    background-color: rgba(0, 0, 0, 0.3);\r\n  }\r\n`;\r\n\r\nconst ChangeFacingCameraButton = styled(Button)`\r\n  background: url(\"https://img.icons8.com/ios/50/000000/switch-camera.png\");\r\n  background-position: center;\r\n  background-size: 40px;\r\n  background-repeat: no-repeat;\r\n  width: 40px;\r\n  height: 40px;\r\n  padding: 40px;\r\n  &:disabled {\r\n    opacity: 0;\r\n    cursor: default;\r\n    padding: 60px;\r\n  }\r\n  @media (max-width: 400px) {\r\n    padding: 40px 5px;\r\n    &:disabled {\r\n      padding: 40px 25px;\r\n    }\r\n  }\r\n`;\r\n\r\nconst ImagePreview = styled.div<{ image: string | null }>`\r\n  width: 120px;\r\n  height: 120px;\r\n  ${({ image }) => (image ? `background-image:  url(${image});` : '')}\r\n  background-size: contain;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n\r\n  @media (max-width: 400px) {\r\n    width: 50px;\r\n    height: 120px;\r\n  }\r\n`;\r\n\r\nconst FullScreenImagePreview = styled.div<{ image: string | null }>`\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 100;\r\n  position: absolute;\r\n  background-color: black;\r\n  ${({ image }) => (image ? `background-image:  url(${image});` : '')}\r\n  background-size: contain;\r\n  background-repeat: no-repeat;\r\n  background-position: center;\r\n`;\r\n\r\nconst App = () => {\r\n  const [numberOfCameras, setNumberOfCameras] = useState(0);\r\n  const [image, setImage] = useState<string | null>(null);\r\n  const [showImage, setShowImage] = useState<boolean>(false);\r\n  const camera = useRef<CameraType>(null);\r\n\r\n  return (\r\n    <Wrapper>\r\n      {showImage ? (\r\n        <FullScreenImagePreview\r\n          image={image}\r\n          onClick={() => {\r\n            setShowImage(!showImage);\r\n          }}\r\n        />\r\n      ) : (\r\n        <Camera\r\n          ref={camera}\r\n          aspectRatio=\"cover\"\r\n          numberOfCamerasCallback={setNumberOfCameras}\r\n          errorMessages={{\r\n            noCameraAccessible: 'No camera device accessible. Please connect your camera or try a different browser.',\r\n            permissionDenied: 'Permission denied. Please refresh and give camera permission.',\r\n            switchCamera:\r\n              'It is not possible to switch camera to different one because there is only one video device accessible.',\r\n            canvas: 'Canvas is not supported.',\r\n          }}\r\n        />\r\n      )}\r\n      <Control>\r\n        <ImagePreview\r\n          image={image}\r\n          onClick={() => {\r\n            setShowImage(!showImage);\r\n          }}\r\n        />\r\n        <TakePhotoButton\r\n          onClick={() => {\r\n            if (camera.current) {\r\n              const photo = camera.current.takePhoto();\r\n              console.log(photo);\r\n              setImage(photo);\r\n            }\r\n          }}\r\n        />\r\n        <ChangeFacingCameraButton\r\n          disabled={numberOfCameras <= 1}\r\n          onClick={() => {\r\n            if (camera.current) {\r\n              const result = camera.current.switchCamera();\r\n              console.log(result);\r\n            }\r\n          }}\r\n        />\r\n      </Control>\r\n    </Wrapper>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}